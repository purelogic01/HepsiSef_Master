
<div id="mostRatedRecipe">
    <section class="wrapper-home-slider slider-main">
        <div class="container">
            <div class="home-slider">
                <div class="slider-box">

                    <!--left slider-->
                    <div class="slider-left">
                        <div class="custom-margin" id="sync1">

                            <div v-for="item in items">
                                <a :href="'/home/detail?slug=' + item.slug">
                                    <img :src="item.images[0].image" width="749" height="521" alt="slide" />
                                </a>
                            </div>


                        </div>
                        <span class="custom-arrows">
                            <span class="left-arrow"><i class="fa fa-arrow-left"></i></span>
                            <span class="right-arrow"><i class="fa fa-arrow-right"></i></span>
                        </span>
                    </div>
                    <!--left slider ends-->
                    <!--right slider-->
                    <div class="slider-right">
                        <div class="custom-margin" id="sync2">


                            <div v-for="item in items">
                                <div class="slide-detail fbox">
                                    <div class="box1 box">
                                        <h2><a :href="'/home/detail?slug=' + item.slug">{{item.title}}</a></h2>
                                        <a class="food-category" :href="'/home/bycategory?slug=' + item.categoryInfo[item.categoryInfo.length-1].slug" tabindex="0">{{item.categoryInfo[item.categoryInfo.length-1].title}}</a>


                                        <ul class="post-meta slider-rating">
                                            <li class="author"><a href="#">{{item.username}}</a></li>
                                            <li class="type"><a href="#" tabindex="0">Easy</a></li>

                                            <li class="time">{{item.prepareTime}}</li>
                                            <li><a class="el-icon-s-flag" @@click="changeBookmark(item.id)" href="#">| İşaretle</a></li>
                                        </ul>
                                        <p>
                                            {{item.details}}
                                        </p>
                                    </div>
                                    <div class="rating-slider box2 box" style="padding:20px; padding-left:100px" >
                                        <el-rate v-model="item.avarageRate"
                                                 disabled
                                                 show-score
                                                 text-color="#ff9900"
                                                 :score-template="'(' + item.avarageRate + '/5)'">
                                        </el-rate>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                    <!--right slider ends-->
                </div>
                <div class="corner-image slider">
                    <img src="/Theme/images/slider-bg-corner.png" alt="image" />
                </div>
            </div>
        </div>

    </section>
    <!--main slider ends-->
    <!--search bar-->
    <div class="wrapper-search-bar">

        <div class="container">
            <div class="search-bar">
                <div class="row">
                    <div class="col-lg-4 col-md-5">
                        <div class="search-box">
                            <form class="search-box-home">
                                <div class="slider-search-left">
                                    <el-select v-model="recipeID"
                                               style="width: 100%;"
                                               filterable
                                               remote
                                               reserve-keyword
                                               placeholder="aranacak tarif"
                                               :remote-method="searchRecipe"
                                               :loading="loading">
                                        <el-option v-for="item in recipes"
                                                   :key="item.id"
                                                   :label="item.title"
                                                   :value="item.id">
                                        </el-option>
                                    </el-select>
                                    <p v-if="validationErrors.some(x => x.key == 'filter.title' )">
                                        {{ validationErrors.find(x => x.key == 'filter.title').value }}
                                    </p>
                                    <button><i class="fa fa-search"></i></button>
                                </div>
                            </form>
                            <div class="search-option">
                                <span>or</span>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-8 col-md-7">
                        <div class="wrapper-search-carousel">
                            <div class="search-carousel slick-initialized slick-slider" id="search-carousel">
                                <div aria-live="polite" class="slick-list draggable">
                                    <div class="slick-track" style="opacity: 1; width: 2400px; transform: translate3d(-750px, 0px, 0px);" role="listbox"  v-for="(item, index) in categories">
                                        <div class="slide slick-slide slick-cloned" data-slick-index="-5" aria-hidden="true" tabindex="-1" style="width: 150px;">
                                            <a  :href="'/recipe/byCategory?slug=' + item.slug" tabindex="-1">
                                                <span>
                                                    <svg version="1.1" class="icon-container" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="42px" height="48px" viewBox="0 0 42 48" enable-background="new 0 0 42 48" xml:space="preserve">
<path class="icon-svg" d="M34,22.997c0-2.757-2.244-5-5.001-5c-1.641,0-3.088,0.805-3.999,2.031c-0.912-1.226-2.358-2.031-4-2.031
	c-1.641,0-3.088,0.805-4,2.031c-0.912-1.226-2.358-2.031-4-2.031c-2.757,0-5.001,2.242-5.001,5c0,2.568,1.957,4.667,4.454,4.942
	c-0.286,0.629-0.455,1.321-0.455,2.056c0,2.569,1.957,4.667,4.454,4.943C16.169,35.567,16,36.26,16,36.994
	c0,2.756,2.242,4.998,5,4.998c2.757,0,5-2.242,5-4.998c0-0.734-0.169-1.427-0.453-2.056c2.497-0.276,4.454-2.374,4.454-4.943
	c0-0.734-0.169-1.427-0.455-2.056C32.044,27.664,34,25.565,34,22.997z M21,19.997c1.653,0,3,1.345,3,3c0,1.653-1.347,2.998-3,2.998
	c-1.654,0-3-1.345-3-2.998C18,21.342,19.346,19.997,21,19.997z M13.001,25.995c-1.655,0-3.001-1.345-3.001-2.998
	c0-1.655,1.346-3,3.001-3c1.653,0,3,1.345,3,3C16,24.65,14.654,25.995,13.001,25.995z M17,32.994c-1.655,0-3-1.346-3-2.999
	c0-1.654,1.345-3,3-3c1.653,0,3,1.346,3,3C20,31.648,18.654,32.994,17,32.994z M21,39.992c-1.654,0-3-1.345-3-2.998
	c0-1.655,1.346-3,3-3c1.653,0,3,1.345,3,3C24,38.647,22.653,39.992,21,39.992z M25,32.994c-1.654,0-3-1.346-3-2.999
	c0-1.654,1.346-3,3-3s2.999,1.346,2.999,3C27.999,31.648,26.654,32.994,25,32.994z M28.999,25.995c-1.653,0-2.999-1.345-2.999-2.998
	c0-1.655,1.346-3,2.999-3c1.655,0,3.002,1.345,3.002,3C32.001,24.65,30.654,25.995,28.999,25.995z M15,9.998c2.755,0,5,2.243,5,5
	c0,0.552,0.448,1,1,1s1-0.448,1-1c0-1.355-0.393-2.616-1.062-3.689C20.971,11.21,21,11.108,21,10.998c0-1.654,1.346-3,3-3
	c0.553,0,1-0.447,1-1C25,6.447,24.553,6,24,6c-2.218,0-4.08,1.46-4.732,3.462C18.084,8.548,16.606,7.999,15,7.999
	c-0.553,0-1,0.448-1,1C14,9.552,14.447,9.998,15,9.998z"></path>
</svg>
                                                </span>{{item.title}}
                                            </a>
                                        </div>
                                        
                                        
                                      
                                    </div>
                                </div>







                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        @*
        <div class="container">
            <div class="search-bar">
                <div class="row">
                    <div class="col-lg-4 col-md-5" style=" display: flex;
                                                           align-items: center;
                                                           justify-content: center;
                                                           padding-left: 20px;
                                                           height: 65px;">

                        <el-select v-model="recipeID"
                                   style="width: 100%;"
                                   filterable
                                   remote
                                   reserve-keyword
                                   placeholder="aranacak tarif"
                                   :remote-method="searchRecipe"
                                   :loading="loading">
                            <el-option v-for="item in recipes"
                                       :key="item.id"
                                       :label="item.title"
                                       :value="item.id">
                            </el-option>
                        </el-select>
                        <p v-if="validationErrors.some(x => x.key == 'filter.title' )">
                            {{ validationErrors.find(x => x.key == 'filter.title').value }}
                        </p>

                    </div>
                    <div class="col-lg-8 col-md-7">
                        <div class="wrapper-search-carousel">
                            <div class="search-carousel" id="search-carousel">
                                <div class="slide" v-for="(item, index) in categories">

                                    <a :href="'/recipe/byCategory?slug=' + item.slug">
                                        {{item.title}}
                                    </a>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        *@

        <!--search bar ends-->
        <!--hot recipes-->

        <section class="wrapper-hot-recipes">
            <div class="container">
                <div class="container-tags">
                    <span class="tag">
                        <span class="tag-inner">En çok sevilenler</span>
                    </span>
                    <!--
                * These tags are skipped for WordPress specific AJAX functionality.
                <ul>
                    <li><a href="#">Latest Recipes</a></li>
                    <li><a href="#">Most Rated</a></li>
                    <li><a href="#">Most Liked</a></li>
                </ul>
                -->
                </div>
                <div class="container-hot-recipes">
                    <div class="hot-row">
                        <!--recipe col starts-->
                        <div class="full-image col-size">
                            <a :href="'/home/detail?slug=' + random[0].slug">
                                <figure class="inner-full-im age">
                                    <img :src="random[0].images[0].image" alt="image" width="285" height="368" />
                                    <figcaption>{{random[0].title}} </figcaption>
                                </figure>
                            </a>
                        </div>
                        <!--recipe col ends-->
                        <!--recipe col start-->
                        <div class="split-images col-size">
                            <div class="split-images-inner">
                                <!--recipe start-->
                                <div class="intro-first ">
                                    <div class="recipe-box">
                                        <div class="intro bg-color1">
                                            <div class="heading-recipe">
                                                <h3><a :href="'/home/detail?slug=' + random[1].slug">{{random[1].title}}</a></h3>
                                            </div>
                                            <div class="rating-box">
                                                <el-rate v-model="random[1].avarageRate"
                                                         disabled
                                                         show-score
                                                         text-color="#ff9900"
                                                         :score-template="'(' + random[1].avarageRate + '/5)'">
                                                </el-rate>
                                            </div>
                                        </div>
                                        <div class="image">
                                            <a :href="'/home/detail?slug=' + random[1].slug"><img :src="random[1].images[0].image" alt="image" width="285" height="184" /></a>
                                        </div>
                                    </div>
                                </div>
                                <!--recipe ends-->
                                <!--recipe start-->
                                <div class="image-first">
                                    <div class="recipe-box">
                                        <div class="intro bg-color2">

                                            <div class="heading-recipe">
                                                <h3><a :href="'/home/detail?slug=' + random[2].slug">{{random[2].title}}</a></h3>
                                            </div>
                                            <div class="rating-box">
                                                <el-rate v-model="random[2].avarageRate"
                                                         disabled
                                                         show-score
                                                         text-color="#ff9900"
                                                         :score-template="'(' + random[2].avarageRate + '/5)'">
                                                </el-rate>
                                            </div>
                                        </div>
                                        <div class="image">
                                            <a :href="'/home/detail?slug=' + random[2].slug"><img :src="random[2].images[0].image" alt="image" width="285" height="184" /></a>
                                        </div>
                                    </div>
                                </div>
                                <!--recipe ends-->
                            </div>
                        </div>
                        <!--recipe col ends-->
                        <!--recipe col start-->
                        <div class="split-images col-size">
                            <div class="split-images-inner">
                                <!--recipe start-->
                                <div class="image-first">
                                    <div class="recipe-box">
                                        <div class="intro bg-color3">
                                            <div class="heading-recipe">
                                                <h3><a :href="'/home/detail?slug=' + random[3].slug">{{random[3].title}}</a></h3>
                                            </div>
                                            <div class="rating-box">
                                                <el-rate v-model="random[3].avarageRate"
                                                         disabled
                                                         show-score
                                                         text-color="#ff9900"
                                                         :score-template="'(' + random[3].avarageRate + '/5)'">
                                                </el-rate>
                                            </div>
                                        </div>
                                        <div class="image">
                                            <a :href="'/home/detail?slug=' + random[3].slug"><img :src="random[3].images[0].image" alt="image" width="285" height="184" /></a>
                                        </div>
                                    </div>
                                </div>
                                <!--recipe ends-->
                                <!--recipe start-->
                                <div class="intro-first">
                                    <div class="recipe-box">
                                        <div class="intro bg-color3">
                                            <div class="heading-recipe">
                                                <h3><a :href="'/home/detail?slug=' + random[4].slug">{{random[4].title}}</a></h3>
                                            </div>
                                            <div class="rating-box">
                                                <el-rate v-model="random[4].avarageRate"
                                                         disabled
                                                         show-score
                                                         text-color="#ff9900"
                                                         :score-template="'(' + random[4].avarageRate + '/5)'">
                                                </el-rate>
                                            </div>
                                        </div>
                                        <div class="image">
                                            <a :href="'/home/detail?slug=' + random[4].slug"><img :src="random[4].images[0].image" alt="image" width="285" height="184" /></a>
                                        </div>
                                    </div>
                                </div>
                                <!--recipe ends-->

                            </div>
                        </div>
                        <!--recipe col ends-->
                        <!--recipe col start-->
                        <div class="split-images col-size">
                            <div class="split-images-inner">
                                <!--recipe start-->
                                <div class="intro-first">
                                    <div class="recipe-box">

                                        <div class="intro bg-color5">
                                            <div class="heading-recipe">
                                                <h3><a :href="'/home/detail?slug=' + random[5].slug">{{random[5].title}}</a></h3>
                                            </div></a></h3>
                                            <ul style="margin:20px" class="post-meta recipe">
                                                <li class="author"><a href="#">{{random[5].username}}</a></li>

                                                <li class="time">{{random[5].prepareTime}}</li>
                                            </ul>
                                            <p style="margin:20px">
                                                {{random[5].details}}
                                            </p>
                                            <div style="margin:20px">
                                                <el-rate v-model="random[5].avarageRate"
                                                         disabled
                                                         show-score
                                                         text-color="#ff9900"
                                                         :score-template="random[5].avarageRate + '/5'">
                                                </el-rate>
                                            </div>
                                        </div>


                                        <div class="image">
                                            <a :href="'/home/detail?slug=' + random[5].slug"><img :src="random[5].images[0].image" alt="image" width="285" height="368" /></a>
                                        </div>
                                    </div>
                                </div>
                                <!--recipe ends-->
                            </div>
                        </div>
                        <!--recipe col ends-->

                    </div>

                    <!--corner background image-->
                    <div class="corner-image hot">
                        <img src="/Theme/images/slider-bg-corner2.png" alt="image" />
                    </div>
                    <!--corner background image ends-->

                </div>
            </div>
        </section>
    </div>
<!--hot recipes end-->
<!--recipe submit banner-->
<div class="recipe-submit-banner">
    <div class="container">
        <div class="recipe-banner">
            @*<img class="" src="/Theme/images/temp-images/recipe-banner-img.png" alt="Image" />*@
            <div class="row">
                <div class="col-md-9">
                    <div class="banner-text">
                        <h2>Şef olmak ister misiniz ?</h2>
                        <p>
                            Şef olmak için tariflerinzi gönderebilirsiniz.
                        </p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="recipe-button">
                        <a class="submit-recipe" href=@Url.Action("SubmitRecipe","Home")>Tarif Gönder</a>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>
    </div>

<script>
    var vm = new Vue({
        el: '#mostRatedRecipe',

        data: function () {
            return {
                loading: false,
                items: [],
                random: [],
                categories: [],
                filter: {
                    searchTerm: null,
                    skip: 0
                },
                recipes: [],
                recipeID: null,
                validationErrors: []
            }
        },
        beforeMount() {

            axios.post('recipe/mostRatedRecipe').then((res) => {
                this.items = res.data.data.items;

                setTimeout(() => {
                    $('#sync1').slick({
                        slidesToShow: 1,
                        slidesToScroll: 1,
                        speed: 1000,
                        autoplay: true,
                        autoplaySpeed: 7000,
                        asNavFor: '#sync2',
                        infinite: true,
                        pauseOnHover: true,
                        prevArrow: $('.left-arrow'),
                        nextArrow: $('.right-arrow'),
                        //autoplaySpeed: 0
                    });

                    $('#sync2').slick({
                        slidesToShow: 1,
                        slidesToScroll: 1,
                        asNavFor: '#sync1',
                        speed: 1000,
                        arrows: false,
                        fade: true,
                        pauseOnHover: true
                    });
                }, 1000)
            }),
                axios.post('category/random').then((res) => {
                    this.categories = res.data.data.items;
                }),
                axios.post('recipe/random').then((res) => {
                    this.random = res.data.data.items;
                })


        },
        methods: {
            changeBookmark(id) {
                axios.post("recipe/togglebookmark", { id })
            },
            searchRecipe(query) {
                this.loading = true;
                axios.post("recipe/all", {skip: 0, searchTerm: query, category: null, serviceCount: null, cookingTime: null, slug: null}).then((res) => {
                    this.recipes = res.data.data.items;
                    this.loading = false
                })
            }
        },
        
        watch: {
            filter: {
                handler: function () {
                    this.callRecipe()
                },
                deep: true
            },
            recipeID: function () {
                window.location.href = "/home/detail?slug=" + this.recipes.find(k => k.id == this.recipeID).slug
            }
        }





    })
</script>